(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(38)},19:function(e,n,t){},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),r=t(13),c=t.n(r),i=(t(19),t(2)),u=function(e){var n=e.onFilterChange,t=e.filter;return a.a.createElement("div",null,"filter persons with name like ",a.a.createElement("input",{onChange:n,value:t}))},l=function(e){var n=e.onNameChange,t=e.onNumberChange,o=e.onAddPerson,r=e.newName,c=e.newNumber;return a.a.createElement("form",null,a.a.createElement("div",null,"name: ",a.a.createElement("input",{onChange:n,value:r})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{onChange:t,value:c})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit",onClick:o},"add")))},s=function(e){var n=e.person,t=e.onRemovePerson;return a.a.createElement("div",null,n.name," ",n.number,a.a.createElement("button",{onClick:function(){t(n)}},"delete"))},m=function(e){var n=e.filter,t=e.persons,o=e.onRemovePerson;return a.a.createElement("div",null,(n.length>0?t.filter((function(e){return e.name.toUpperCase().includes(n.toUpperCase())})):t).map((function(e){return a.a.createElement(s,{key:e.name,person:e,onRemovePerson:o})})))},f=(t(20),function(e){return console.log(e),null===e.notification?null:a.a.createElement("div",{className:e.notification.isError?"error":"notif"},e.notification.text)}),d=t(3),h=t.n(d),v="/api/persons",p=function(){return h.a.get(v).then((function(e){return e.data}))},b=function(e){return h.a.post(v,e).then((function(e){return e.data}))},g=function(e,n){return h.a.put("".concat(v,"/").concat(e),n).then((function(e){return e.data}))},E=function(e){return h.a.delete("".concat(v,"/").concat(e.id),e).then((function(e){console.log(e.data)}))},w=function(){Object(o.useEffect)((function(){console.log("start effect"),p().then((function(e){console.log("promise fulfilled"),r(e)}))}),[]),console.log("set states");var e=Object(o.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(""),s=Object(i.a)(c,2),d=s[0],h=s[1],v=Object(o.useState)(""),w=Object(i.a)(v,2),C=w[0],k=w[1],j=Object(o.useState)(""),O=Object(i.a)(j,2),N=O[0],P=O[1],y=Object(o.useState)(null),R=Object(i.a)(y,2),x=R[0],S=R[1],A=function(e){S({text:e,isError:!1}),setTimeout((function(){S(null)}),5e3)},B=function(e){S({text:e,isError:!0}),setTimeout((function(){S(null)}),5e3)};return console.log("return"),a.a.createElement("div",null,a.a.createElement(f,{notification:x}),a.a.createElement("h2",null,"Phonebook"),a.a.createElement(u,{onFilterChange:function(e){P(e.target.value)},filter:N}),a.a.createElement("h3",null,"add a new"),a.a.createElement(l,{onNameChange:function(e){h(e.target.value)},onNumberChange:function(e){k(e.target.value)},onAddPerson:function(e){e.preventDefault(),console.log("handleAddPerson ",d,C,t);var n=t.find((function(e){return e.name===d}));if(void 0!==n)window.confirm("".concat(n.name," already exists in the phonebook. Replace the number?"))&&(n.number=C,g(n.id,n).then((function(e){r(t.map((function(e){return e.id===n.id?n:e}))),A("".concat(n.name," updated"))})).catch((function(e){console.log(e),B(e.response.data.error)})),h(""),k(""));else{var o={name:d,number:C};b(o).then((function(e){r(t.concat([e])),A("".concat(o.name," added"))})).catch((function(e){console.log(e),B(e.response.data.error)})),h(""),k("")}},newName:d,newNumber:C}),a.a.createElement("h3",null,"Numbers"),a.a.createElement(m,{filter:N,persons:t,onRemovePerson:function(e){console.log("handleRemovePerson ",e),window.confirm("Are you sure you want to delete ".concat(e.name,"?"))&&E(e).then((function(){console.log("Removed person ",e),r(t.filter((function(n){return n.id!==e.id}))),A("".concat(e.name," removed"))})).catch((function(n){B("".concat(e.name," could not be removed as it doesnt exist on the server"))}))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[14,1,2]]]);
//# sourceMappingURL=main.4c50c158.chunk.js.map